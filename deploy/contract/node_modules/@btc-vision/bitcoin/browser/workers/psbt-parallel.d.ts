import { Psbt } from '../psbt.js';
import { ParallelSignerKeyPair, ParallelSigningResult, SigningPoolLike, SigningTask, WorkerPoolConfig } from './types.js';
/**
 * Options for parallel PSBT signing.
 */
export interface ParallelSignOptions {
    /**
     * Sighash types allowed for signing.
     * Default: [SIGHASH_ALL] for legacy, [SIGHASH_DEFAULT] for Taproot
     */
    readonly sighashTypes?: readonly number[];
    /**
     * Tap leaf hash to sign (for Taproot script-path).
     */
    readonly tapLeafHash?: Uint8Array;
    /**
     * Worker pool configuration (if pool not provided).
     */
    readonly poolConfig?: WorkerPoolConfig;
    /**
     * Whether to use low-R signing for ECDSA.
     * Default: false
     */
    readonly lowR?: boolean;
}
/**
 * Key pair interface that extends ParallelSignerKeyPair with PSBT compatibility.
 */
export interface PsbtParallelKeyPair extends ParallelSignerKeyPair {
    /** Network (optional, for validation) */
    readonly network?: {
        messagePrefix: string;
    };
}
/**
 * Signs all PSBT inputs in parallel using worker threads.
 *
 * This is the main entry point for parallel PSBT signing.
 * All inputs that can be signed with the provided key pair
 * will be signed simultaneously.
 *
 * SECURITY: Private keys are isolated per-worker and zeroed after signing.
 *
 * @param psbt - The PSBT to sign
 * @param keyPair - Key pair with getPrivateKey() method
 * @param poolOrConfig - Existing pool instance or configuration for new pool
 * @param options - Signing options
 * @returns Promise resolving to signing result
 *
 * @example
 * ```typescript
 * // With existing pool (recommended for multiple operations)
 * const pool = WorkerSigningPool.getInstance();
 * pool.preserveWorkers();
 *
 * const result = await signPsbtParallel(psbt, keyPair, pool);
 *
 * if (result.success) {
 *     psbt.finalizeAllInputs();
 * }
 *
 * // With inline pool (creates and destroys pool)
 * const result = await signPsbtParallel(psbt, keyPair, { workerCount: 4 });
 * ```
 */
export declare function signPsbtParallel(psbt: Psbt, keyPair: PsbtParallelKeyPair, poolOrConfig?: SigningPoolLike | WorkerPoolConfig, options?: ParallelSignOptions): Promise<ParallelSigningResult>;
/**
 * Prepares signing tasks from a PSBT.
 *
 * Analyzes each input and creates a signing task for inputs
 * that can be signed with the provided key pair.
 *
 * @param psbt - The PSBT to analyze
 * @param keyPair - Key pair to check against
 * @param options - Signing options
 * @returns Array of signing tasks
 */
export declare function prepareSigningTasks(psbt: Psbt, keyPair: PsbtParallelKeyPair, options?: ParallelSignOptions): SigningTask[];
/**
 * Applies parallel signing results to a PSBT.
 *
 * @param psbt - The PSBT to update
 * @param result - Signing results from parallel signing
 * @param keyPair - Key pair used for signing
 */
export declare function applySignaturesToPsbt(psbt: Psbt, result: ParallelSigningResult, keyPair: PsbtParallelKeyPair): void;
//# sourceMappingURL=psbt-parallel.d.ts.map