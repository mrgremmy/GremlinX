import { SimpleParser, TransformVisitor } from "../index.js";
import { IdentifierExpression } from "@btc-vision/assemblyscript/dist/assemblyscript.js";
import { isLibrary, not } from '../utils.js';
class FunctionCallTransform extends TransformVisitor {
    visitCallExpression(node) {
        if (node.expression instanceof IdentifierExpression) {
            if (node.expression.text == "foo") {
                let res = SimpleParser.parseExpression('"hello world"');
                res.range = node.range;
                return res;
            }
        }
        return super.visitCallExpression(node);
    }
    afterParse(_) {
        let sources = _.sources.filter(not(isLibrary));
        this.visit(sources);
    }
}
export default new FunctionCallTransform();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnVuY3Rpb25DYWxsVHJhbnNmb3JtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2V4YW1wbGVzL2Z1bmN0aW9uQ2FsbFRyYW5zZm9ybS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsWUFBWSxFQUFFLGdCQUFnQixFQUFFLE1BQU0sYUFBYSxDQUFDO0FBQzdELE9BQU8sRUFHSCxvQkFBb0IsRUFFdkIsTUFBTSxtREFBbUQsQ0FBQztBQUMzRCxPQUFPLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUU3QyxNQUFNLHFCQUFzQixTQUFRLGdCQUFnQjtJQUNoRCxtQkFBbUIsQ0FBQyxJQUFvQjtRQUNwQyxJQUFJLElBQUksQ0FBQyxVQUFVLFlBQVksb0JBQW9CLEVBQUUsQ0FBQztZQUNsRCxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxJQUFJLEtBQUssRUFBRSxDQUFDO2dCQUNoQyxJQUFJLEdBQUcsR0FBRyxZQUFZLENBQUMsZUFBZSxDQUFDLGVBQWUsQ0FBQyxDQUFDO2dCQUN4RCxHQUFHLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7Z0JBQ3ZCLE9BQU8sR0FBRyxDQUFDO1lBQ2YsQ0FBQztRQUNMLENBQUM7UUFDRCxPQUFPLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMzQyxDQUFDO0lBRUQsVUFBVSxDQUFDLENBQVM7UUFDaEIsSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDL0MsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUN4QixDQUFDO0NBQ0o7QUFFRCxlQUFlLElBQUkscUJBQXFCLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNpbXBsZVBhcnNlciwgVHJhbnNmb3JtVmlzaXRvciB9IGZyb20gXCIuLi9pbmRleC5qc1wiO1xyXG5pbXBvcnQge1xyXG4gICAgQ2FsbEV4cHJlc3Npb24sXHJcbiAgICBFeHByZXNzaW9uLFxyXG4gICAgSWRlbnRpZmllckV4cHJlc3Npb24sXHJcbiAgICBQYXJzZXJcclxufSBmcm9tIFwiQGJ0Yy12aXNpb24vYXNzZW1ibHlzY3JpcHQvZGlzdC9hc3NlbWJseXNjcmlwdC5qc1wiO1xyXG5pbXBvcnQgeyBpc0xpYnJhcnksIG5vdCB9IGZyb20gJy4uL3V0aWxzLmpzJztcclxuXHJcbmNsYXNzIEZ1bmN0aW9uQ2FsbFRyYW5zZm9ybSBleHRlbmRzIFRyYW5zZm9ybVZpc2l0b3Ige1xyXG4gICAgdmlzaXRDYWxsRXhwcmVzc2lvbihub2RlOiBDYWxsRXhwcmVzc2lvbik6IEV4cHJlc3Npb24ge1xyXG4gICAgICAgIGlmIChub2RlLmV4cHJlc3Npb24gaW5zdGFuY2VvZiBJZGVudGlmaWVyRXhwcmVzc2lvbikge1xyXG4gICAgICAgICAgICBpZiAobm9kZS5leHByZXNzaW9uLnRleHQgPT0gXCJmb29cIikge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlcyA9IFNpbXBsZVBhcnNlci5wYXJzZUV4cHJlc3Npb24oJ1wiaGVsbG8gd29ybGRcIicpO1xyXG4gICAgICAgICAgICAgICAgcmVzLnJhbmdlID0gbm9kZS5yYW5nZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLnZpc2l0Q2FsbEV4cHJlc3Npb24obm9kZSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWZ0ZXJQYXJzZShfOiBQYXJzZXIpOiB2b2lkIHtcclxuICAgICAgICBsZXQgc291cmNlcyA9IF8uc291cmNlcy5maWx0ZXIobm90KGlzTGlicmFyeSkpO1xyXG4gICAgICAgIHRoaXMudmlzaXQoc291cmNlcyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBGdW5jdGlvbkNhbGxUcmFuc2Zvcm0oKTtcclxuIl19