/**
 * Node.js-specific worker signing pool implementation.
 *
 * Uses worker_threads module for true parallel execution.
 * Private keys are isolated per-worker and zeroed immediately after signing.
 *
 * @packageDocumentation
 */
import type { ParallelSignerKeyPair, ParallelSigningResult, SigningTask, WorkerPoolConfig } from './types.js';
/**
 * ECC library types for Node.js worker.
 */
export declare const NodeEccLibrary: {
    /** Pure JS @noble/secp256k1 (default, ~12KB) */
    readonly Noble: "noble";
    /** WASM-based tiny-secp256k1 (faster, ~1.2MB) */
    readonly TinySecp256k1: "tiny-secp256k1";
};
export type NodeEccLibrary = (typeof NodeEccLibrary)[keyof typeof NodeEccLibrary];
/**
 * Extended configuration for Node.js worker pool.
 */
export interface NodeWorkerPoolConfig extends WorkerPoolConfig {
    /**
     * ECC library type for signing.
     * - NodeEccLibrary.Noble: Pure JS @noble/secp256k1 (default, ~12KB)
     * - NodeEccLibrary.TinySecp256k1: WASM-based tiny-secp256k1 (faster)
     *
     * Default: NodeEccLibrary.Noble
     */
    readonly eccLibrary?: NodeEccLibrary;
}
/**
 * Worker-based parallel signing pool for Node.js.
 *
 * Uses worker_threads for true parallel execution.
 * Provides secure key handling with immediate zeroing after use.
 *
 * @example
 * ```typescript
 * import { NodeWorkerSigningPool } from '@btc-vision/bitcoin/workers';
 *
 * // Initialize pool at app startup
 * const pool = NodeWorkerSigningPool.getInstance({ workerCount: 4 });
 * pool.preserveWorkers();
 *
 * // Sign batch
 * const result = await pool.signBatch(tasks, keyPair);
 *
 * // Cleanup at app shutdown
 * await pool.shutdown();
 * ```
 */
export declare class NodeWorkerSigningPool {
    #private;
    /**
     * Creates a new NodeWorkerSigningPool.
     *
     * @param config - Pool configuration
     */
    private constructor();
    /**
     * Number of workers in the pool.
     */
    get workerCount(): number;
    /**
     * Number of idle workers available.
     */
    get idleWorkerCount(): number;
    /**
     * Number of busy workers.
     */
    get busyWorkerCount(): number;
    /**
     * Whether workers are being preserved between batches.
     */
    get isPreservingWorkers(): boolean;
    /**
     * Gets the singleton pool instance.
     *
     * @param config - Optional configuration (only used on first call)
     * @returns The singleton pool instance
     */
    static getInstance(config?: NodeWorkerPoolConfig): NodeWorkerSigningPool;
    /**
     * Resets the singleton instance (for testing).
     */
    static resetInstance(): void;
    /**
     * Enables worker preservation between signing batches.
     */
    preserveWorkers(): void;
    /**
     * Disables worker preservation.
     */
    releaseWorkers(): void;
    /**
     * Initializes the worker pool.
     *
     * @returns Promise that resolves when all workers are ready
     */
    initialize(): Promise<void>;
    /**
     * Signs a batch of tasks in parallel.
     *
     * Tasks are distributed across workers and processed in batches for efficiency.
     *
     * @param tasks - Signing tasks
     * @param keyPair - Key pair with getPrivateKey() method
     * @returns Promise resolving to signing results
     */
    signBatch(tasks: readonly SigningTask[], keyPair: ParallelSignerKeyPair): Promise<ParallelSigningResult>;
    /**
     * Disposes of the pool by shutting down all workers.
     *
     * Enables `await using pool = ...` syntax for automatic cleanup.
     */
    [Symbol.asyncDispose](): Promise<void>;
    /**
     * Shuts down the pool and terminates all workers.
     *
     * @returns Promise that resolves when all workers are terminated
     */
    shutdown(): Promise<void>;
    [Symbol.dispose](): void;
}
/**
 * Convenience function to get the singleton pool instance.
 */
export declare function getNodeSigningPool(config?: NodeWorkerPoolConfig): NodeWorkerSigningPool;
//# sourceMappingURL=WorkerSigningPool.node.d.ts.map